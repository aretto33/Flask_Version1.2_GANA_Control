{% extends "base.html" %}
{% block content %}

<style>
    /* Ajuste del banner */
    .banner {
        width: 100%;
        max-width: 1300px;
        height: auto;
        display: block;
        margin: 20px auto;
        border-radius: 12px;
    }

    .contenido {
        max-width: 1000px;
        margin: auto;
    }

    /* 游꿡 Estilos del mini-juego */
    #game-area {
        width: 100%;
        height: 250px;
        background: #dff5d0;
        border: 2px solid #7a9e6f;
        border-radius: 12px;
        position: relative;
        overflow: hidden;
        margin-top: 30px;
    }

    #cow {
        width: 70px;
        height: 70px;
        position: absolute;
        top: 90px;
        left: 10px;
        transition: top 0.1s;
    }

    .obstacle {
        width: 40px;
        height: 80px;
        background: brown;
        position: absolute;
        right: -50px;
        top: 120px;
        animation: moveObstacle 2.8s linear infinite;
        border-radius: 8px;
    }

    @keyframes moveObstacle {
        0% { right: -50px; }
        100% { right: 100%; }
    }

    #score {
        font-size: 1.3rem;
        font-weight: bold;
        margin-top: 10px;
        text-align: center;
    }
</style>

<div class="dashboard">

    <!-- Panel lateral -->
    <div class="sidebar">
        <a href="{{ url_for('animales') }}">Animales</a>
        <a href="{{ url_for('predios') }}">Predios</a>
        <a href="{{ url_for('mi_productor') }}">Mis datos</a>
        <a href="{{ url_for('pesajes') }}">Pesaje</a>
        <a href="{{ url_for('siniga') }}">Registro SINIGA</a>
        <a href="{{ url_for('seguimiento') }}">Seg. Veterinario</a>
        <a href="{{ url_for('ventas') }}">Venta</a>
        <a href="{{ url_for('razas') }}">Razas</a>
    </div>

    <!-- Panel central -->
    <div class="contenido">

        <h2 class="bienvenido"> Bienvenido {{ usuario }} ({{ rol }})</h2>

        <img src="{{ url_for('static', filename='img/banner.png') }}" class="banner">

        <h1 class="titulo">Tr치mites</h1>

        <div class="tramites">
            <a class="btn" href="{{ url_for('upp') }}">Inscripci칩n UPP</a>
            <a class="btn" href="#">Tr치mites Datos</a>
            <a class="btn" href="#">Tr치mite 3</a>
        </div>

        <!-- 游꿡 MINIJUEGO DE VACAS -->
        <h2 style="margin-top:40px; text-align:center;">Mini-Juego: 춰Evita los obst치culos!</h2>

        <div id="game-area">
            <img id="cow" src="{{ url_for('static', filename='img/cow.png') }}">
            <div class="obstacle"></div>
        </div>

        <div id="score">Puntuaci칩n: <span id="scoreValue">0</span></div>

    </div>
</div>

<script>
    let cow = document.getElementById("cow");
    let scoreValue = document.getElementById("scoreValue");

    let cowY = 90;
    let score = 0;

    // Saltar con espacio
    document.addEventListener("keydown", (e) => {
        if (e.code === "Space") {
            cowY -= 60;
            if (cowY < 10) cowY = 10;
            cow.style.top = cowY + "px";

            setTimeout(() => {
                cowY += 60;
                if (cowY > 150) cowY = 150;
                cow.style.top = cowY + "px";
            }, 300);
        }
    });

    // Sistema simple de puntaje
    setInterval(() => {
        score++;
        scoreValue.textContent = score;
    }, 800);
</script>

{% endblock %}
